<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.4.1 (Python 3.13.1 on win32)" generated="2026-02-17T19:14:23.682099" rpa="false" schemaversion="5">
<suite id="s1" name="Retention Tests" source="Z:\SE\scrum\Sec02_G04_SoftwareEngineering_PaiNamNaeWebApp\tests\retention_test\retention_tests.robot">
<kw name="เตรียมสภาพแวดล้อมการทดสอบ" owner="api_keywords" type="SETUP">
<kw name="Connect To Database" owner="DatabaseLibrary">
<msg time="2026-02-17T19:14:23.885576" level="INFO">Looking for configuration file: 'resources\db.cfg'</msg>
<msg time="2026-02-17T19:14:23.885724" level="INFO">Configuration file doesn't exist</msg>
<msg time="2026-02-17T19:14:23.897557" level="INFO">Connect to DB using : psycopg2.connect(database='postgres', user='postgres', password=***, host='localhost', port=5432)</msg>
<arg>psycopg2</arg>
<arg>${DB_NAME}</arg>
<arg>${DB_USER}</arg>
<arg>${DB_PASS}</arg>
<arg>${DB_HOST}</arg>
<arg>${DB_PORT}</arg>
<doc>Creates a database connection using the DB API 2.0 ``db_module`` and the parameters provided.
Along with listed commonly used arguments (`db_name`, `db_host` etc.)
you can set any other DB module specific parameters as key/value pairs.</doc>
<status status="PASS" start="2026-02-17T19:14:23.885223" elapsed="0.130272"/>
</kw>
<kw name="เชื่อมต่อระบบ API" owner="api_keywords">
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2026-02-17T19:14:24.016201" level="INFO">Creating Session using : alias=mysession, url=http://localhost:3000, headers={},                     cookies={}, auth=None, timeout=None, proxies=None, verify=False,                     debug=0 </msg>
<arg>mysession</arg>
<arg>${BASE_URL}</arg>
<arg>disable_warnings=1</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2026-02-17T19:14:24.015952" elapsed="0.000470"/>
</kw>
<status status="PASS" start="2026-02-17T19:14:24.015741" elapsed="0.000765"/>
</kw>
<doc>เชื่อมต่อทั้ง Database และ API Session</doc>
<status status="PASS" start="2026-02-17T19:14:23.884698" elapsed="0.131857"/>
</kw>
<test id="s1-t1" name="ทดสอบกฎหมาย 90 วัน: ข้อมูลเก่า 90 วันต้องยังดึงออกมาได้" line="13">
<kw name="Admin เข้าสู่ระบบเพื่อขอ Token" owner="api_keywords">
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.019219" level="INFO">&amp;{headers} = { Content-Type=application/json }</msg>
<var>&amp;{headers}</var>
<arg>Content-Type=application/json</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.018735" elapsed="0.000516"/>
</kw>
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.019725" level="INFO">&amp;{body} = { email=admin@example.com | password=123456789 }</msg>
<var>&amp;{body}</var>
<arg>email=${ADMIN_EMAIL}</arg>
<arg>password=${ADMIN_PASS}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.019357" elapsed="0.000394"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2026-02-17T19:14:24.147040" level="INFO">POST Request : url=http://localhost:3000/api/auth/login 
 path_url=/api/auth/login 
 headers={'User-Agent': 'python-requests/2.32.5', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '55', 'Content-Type': 'application/json'} 
 body=b'{"email": "admin@example.com", "password": "123456789"}' 
 </msg>
<msg time="2026-02-17T19:14:24.147174" level="INFO">POST Response : url=http://localhost:3000/api/auth/login 
 status=200, reason=OK 
 headers={'Content-Security-Policy': "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests", 'Cross-Origin-Opener-Policy': 'same-origin', 'Cross-Origin-Resource-Policy': 'same-origin', 'Origin-Agent-Cluster': '?1', 'Referrer-Policy': 'no-referrer', 'Strict-Transport-Security': 'max-age=15552000; includeSubDomains', 'X-Content-Type-Options': 'nosniff', 'X-DNS-Prefetch-Control': 'off', 'X-Download-Options': 'noopen', 'X-Frame-Options': 'SAMEORIGIN', 'X-Permitted-Cross-Domain-Policies': 'none', 'X-XSS-Protection': '0', 'Vary': 'Origin', 'Access-Control-Allow-Credentials': 'true', 'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '444', 'ETag': 'W/"1bc-L9m3LPDF+aw7wNv69ZF5/qhi9Pg"', 'Date': 'Tue, 17 Feb 2026 12:14:24 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={"success":true,"message":"Login successful","data":{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtnPL44","user":{"id":"cmlkpxt160000m62aw5muawr6","firstName":"System","lastName":"Administrator","profilePicture":null,"role":"ADMIN","passengerSuspendedUntil":null,"driverSuspendedUntil":null}}} 
 </msg>
<msg time="2026-02-17T19:14:24.147305" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>mysession</arg>
<arg>/api/auth/login</arg>
<arg>json=${body}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2026-02-17T19:14:24.019845" elapsed="0.127486"/>
</kw>
<kw name="Should Be Equal As Strings" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.148028" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>200</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" start="2026-02-17T19:14:24.147468" elapsed="0.000635"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.148790" level="INFO">${json_response} = {'success': True, 'message': 'Login successful', 'data': {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHA...</msg>
<var>${json_response}</var>
<arg>${response.json()}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2026-02-17T19:14:24.148218" elapsed="0.000602"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2026-02-17T19:14:24.149100" level="INFO">${data_part} = {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtn...</msg>
<var>${data_part}</var>
<arg>${json_response}</arg>
<arg>data</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.148927" elapsed="0.000213"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2026-02-17T19:14:24.149390" level="INFO">${token_value} = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtnPL44</msg>
<var>${token_value}</var>
<arg>${data_part}</arg>
<arg>token</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.149236" elapsed="0.000183"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.149840" level="INFO">${TOKEN} = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtnPL44</msg>
<arg>${TOKEN}</arg>
<arg>Bearer ${token_value}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2026-02-17T19:14:24.149522" elapsed="0.000362"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.150345" level="INFO">Token ที่ได้คือ: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtnPL44</msg>
<arg>Token ที่ได้คือ: ${TOKEN}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2026-02-17T19:14:24.150107" elapsed="0.000287"/>
</kw>
<doc>ยิง API Login และเก็บ Token ไว้ในตัวแปร </doc>
<status status="PASS" start="2026-02-17T19:14:24.018501" elapsed="0.131954"/>
</kw>
<kw name="Generate Random String" owner="String">
<msg time="2026-02-17T19:14:24.150985" level="INFO">${random_num} = 83263187</msg>
<var>${random_num}</var>
<arg>8</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.150713" elapsed="0.000299"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.151552" level="INFO">${test_action} = TEST_RETENTION_83263187</msg>
<var>${test_action}</var>
<arg>TEST_RETENTION_${random_num}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2026-02-17T19:14:24.151254" elapsed="0.000324"/>
</kw>
<kw name="Execute Sql String" owner="DatabaseLibrary">
<msg time="2026-02-17T19:14:24.151990" level="INFO" html="true">Executing sql:&lt;br&gt;&lt;code style="font-weight: bold;"&gt;INSERT INTO "SystemLog" ("action", "method", "endpoint", "ip_address", "created_at") VALUES ('TEST_RETENTION_83263187', 'TEST', '/manual/test', '127.0.0.1', NOW() - INTERVAL '90 days');&lt;/code&gt;</msg>
<msg time="2026-02-17T19:14:24.154669" level="INFO">Commit the transaction</msg>
<arg>INSERT INTO "SystemLog" ("action", "method", "endpoint", "ip_address", "created_at") VALUES ('${test_action}', 'TEST', '/manual/test', '127.0.0.1', NOW() - INTERVAL '90 days');</arg>
<doc>Executes the ``sql_string`` - as a single SQL command (default) or as separate statements.</doc>
<status status="PASS" start="2026-02-17T19:14:24.151829" elapsed="0.003825"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.161939" level="INFO">Inject ข้อมูลย้อนหลัง 90 วันเรียบร้อย: Action=TEST_RETENTION_83263187</msg>
<arg>Inject ข้อมูลย้อนหลัง 90 วันเรียบร้อย: Action=${test_action}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2026-02-17T19:14:24.161596" elapsed="0.000396"/>
</kw>
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.165507" level="INFO">&amp;{headers} = { Authorization=Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNi...</msg>
<var>&amp;{headers}</var>
<arg>Authorization=${TOKEN}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2026-02-17T19:14:24.165072" elapsed="0.000470"/>
</kw>
<kw name="GET On Session" owner="RequestsLibrary">
<msg time="2026-02-17T19:14:24.257727" level="INFO">GET Request : url=http://localhost:3000/api/logs?limit=100 
 path_url=/api/logs?limit=100 
 headers={'User-Agent': 'python-requests/2.32.5', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWxrcHh0MTYwMDAwbTYyYXc1bXVhd3I2Iiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzcxMzMwNDY0LCJleHAiOjE3NzEzMzQwNjR9.VzcEryomrCimO1HSW3Onq3vJVNiYJWUI_7bCAtnPL44'} 
 body=None 
 </msg>
<msg time="2026-02-17T19:14:24.257825" level="INFO">GET Response : url=http://localhost:3000/api/logs?limit=100 
 status=200, reason=OK 
 headers={'Content-Security-Policy': "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests", 'Cross-Origin-Opener-Policy': 'same-origin', 'Cross-Origin-Resource-Policy': 'same-origin', 'Origin-Agent-Cluster': '?1', 'Referrer-Policy': 'no-referrer', 'Strict-Transport-Security': 'max-age=15552000; includeSubDomains', 'X-Content-Type-Options': 'nosniff', 'X-DNS-Prefetch-Control': 'off', 'X-Download-Options': 'noopen', 'X-Frame-Options': 'SAMEORIGIN', 'X-Permitted-Cross-Domain-Policies': 'none', 'X-XSS-Protection': '0', 'Vary': 'Origin', 'Access-Control-Allow-Credentials': 'true', 'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '23352', 'ETag': 'W/"5b38-zc/jA+Qvb40Q0RGN61z4QluLIGI"', 'Date': 'Tue, 17 Feb 2026 12:14:24 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={"status":"success","data":[{"id":64,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"5f53fce8e57b822ff3366c64f1aa267941192f1a9a2594c70516f026c626daaa","created_at":"2026-02-17T12:14:24.025Z","user":null},{"id":62,"user_id":"cmlkpxt160000m62aw5muawr6","action":"GET /api/logs?limit=100","method":"GET","endpoint":"/api/logs?limit=100","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"2279642a20a64fb1129b96db04581c2866befe305c98834411e70b890df3ed5d","created_at":"2026-02-17T12:10:29.057Z","user":{"id":"cmlkpxt160000m62aw5muawr6","email":"admin@example.com","role":"ADMIN"}},{"id":60,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"005fad443853787bdc25f4a53d5ffb6e161a20cc18478cdc4e256867ead55bb5","created_at":"2026-02-17T12:10:28.984Z","user":null},{"id":58,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"b45eee5790c0f79a1d6d5349834ca7512a55150f6f13f0b2d66e01c390ea7ba9","created_at":"2026-02-17T12:09:35.840Z","user":null},{"id":56,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"55a2dc5856b6049412f7a2e4865d50bb64bae88839863487ba511c966c16d659","created_at":"2026-02-17T12:08:24.039Z","user":null},{"id":55,"user_id":"cmlkpxt160000m62aw5muawr6","action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"c476602bdb73fe35c7584bce5cfccfa473390eca8eec3b9024b881f01c75876a","created_at":"2026-02-17T12:06:29.880Z","user":{"id":"cmlkpxt160000m62aw5muawr6","email":"admin@example.com","role":"ADMIN"}},{"id":53,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"09c2a8e1b0d5e6e0d5d77949182aa8e0e139f387aac4750a7fd079ccfc92facc","created_at":"2026-02-17T12:06:29.484Z","user":null},{"id":52,"user_id":"cmlkpxt160000m62aw5muawr6","action":"GET /api/logs/export","method":"GET","endpoint":"/api/logs/export","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"db5ffbcb7c5db2f172d2640ed0e4e78d960ea63ff512097e92be4b49b3f81824","created_at":"2026-02-16T10:26:01.240Z","user":{"id":"cmlkpxt160000m62aw5muawr6","email":"admin@example.com","role":"ADMIN"}},{"id":51,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"830fe1474f055b8923b1aa331fcbae78e2bdb2fcf24f9eefa7988780018124d7","created_at":"2026-02-16T10:26:01.171Z","user":null},{"id":50,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"6267a1ddc57c887b4fffc97add0029db28d6e79243060f15dd4e341dc58670e7","created_at":"2026-02-16T10:26:01.161Z","user":null},{"id":49,"user_id":"cmlkpxt160000m62aw5muawr6","action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"1f94a8ef0c1c73089e1a8ba09b68f9c15603905e70281e6ca1ff7f4b8cc83421","created_at":"2026-02-16T10:26:01.017Z","user":{"id":"cmlkpxt160000m62aw5muawr6","email":"admin@example.com","role":"ADMIN"}},{"id":48,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"fed4264686b0c7df99bdbbaa6a65ea7e80de7559daa644127e158e4205185d49","created_at":"2026-02-16T10:26:00.722Z","user":null},{"id":47,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"55009e8753462e97c5d2267e66a9207ee0b7951f6f1f0b9d066c95e2195b4e1e","created_at":"2026-02-16T10:24:06.893Z","user":null},{"id":46,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"3d1dc52644ebfa528a1cd2387662fdefc7ca0bf4987c42a25c8f94abc63b38fc","created_at":"2026-02-16T10:24:06.884Z","user":null},{"id":45,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"1e333113bc5f831ed2d38c11b4446bb449d4570036b356b8cee00a267f861213","created_at":"2026-02-16T10:24:06.812Z","user":null},{"id":44,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"44d1402d623ba2553d417fc1682657fd8526ee92bab4035f590de5a8b1cf588b","created_at":"2026-02-16T10:20:58.142Z","user":null},{"id":43,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"2c7808f54514dc01082d40143856dd90b8ec61e3cd811c111255029ec1a6bdc3","created_at":"2026-02-16T10:20:58.132Z","user":null},{"id":42,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"1bacff88606c0bca7ce9b5bf0f08bf044a8639cc1d67500152838718f42f39af","created_at":"2026-02-16T10:20:58.061Z","user":null},{"id":40,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"3f80e79258e3c5822bb78c2d59d350d2bd4072863b1fac8cb53fa54d25b9c01e","created_at":"2026-02-16T10:20:50.043Z","user":null},{"id":41,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"18bac90b60d9be361a59d9ac48bfaf7f547e6aa632f4abf6a539539752cd8e3a","created_at":"2026-02-16T10:20:50.031Z","user":null},{"id":39,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"687e6c5b0aaaf8496b036be444c8779fbc318bd15eb4c718003431cd5bec3cec","created_at":"2026-02-16T10:20:49.952Z","user":null},{"id":37,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"c539b0e5f1829d7b8d9f11922b9ae5e72a88e6675a01c88b42f6a87081ebf07c","created_at":"2026-02-16T10:20:22.664Z","user":null},{"id":38,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"db241305c83d6710f21de4410994d5a6b06433f72efec8fbb3d14318bb9173c8","created_at":"2026-02-16T10:20:22.653Z","user":null},{"id":36,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"f1f713ca1cc025a1e3a996b04c1f7daf3c936f1c9ad7c082e9df5035347d38f0","created_at":"2026-02-16T10:20:22.516Z","user":null},{"id":35,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"90d9626b42a533704f009e71204fcfff2784cd920b47a021ec8b638f4017fdb9","created_at":"2026-02-16T10:17:12.702Z","user":null},{"id":34,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"293ba5272c6154f1397453fb2cd7fe84e853004ad441865efd707ac87cbba1d3","created_at":"2026-02-16T10:17:12.690Z","user":null},{"id":33,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"ce3a6104060509aa28f233d4ead7cdb62de739dd7b625bdf9797a4cb10094ebc","created_at":"2026-02-16T10:17:12.615Z","user":null},{"id":32,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"c77c18defdf742ff88db4d59e4a3cc9a10127993c6512ab6ab2950189d4cc531","created_at":"2026-02-16T10:13:17.673Z","user":null},{"id":31,"user_id":null,"action":"GET /api/logs","method":"GET","endpoint":"/api/logs","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":401,"log_hash":"6f98568fe4fe53a88b4f3e091048e133b69996161234583f28ef8c523fbb6057","created_at":"2026-02-16T10:13:17.661Z","user":null},{"id":30,"user_id":null,"action":"POST /api/auth/login","method":"POST","endpoint":"/api/auth/login","ip_address":"::1","user_agent":"python-requests/2.32.5","status_code":200,"log_hash":"ba3d0a825759bb68cdd808e997bd5015f310acff2e6b596a1afb764588574861","created_at":"2026-02-16T10:13:17.578Z","user":null},{"id":29,"user_id":null,"action":"GET /api/logs/export","method":"GET","endpoint":"/api/logs/export","ip_address":"::1","user_agent":"PostmanRuntime/7.51.1","status_code":401,"log_hash":"87f63f252a016fd8df899c7eee47f9c62e596fbba92148d810dfb5e5eaf75cef","created_at":"2026-02-14T20:13:41.752Z","user":null},{"id":28,"user_id":null,"action":"GET /api/logs/export","method":"GET","endpoint":"/api/logs/export","ip_address":"::1","user_agent":"PostmanRuntime/7.51.1","status_code":401,"log_hash":"70126... (set the log level to DEBUG or TRACE to see the full content) 
 </msg>
<msg time="2026-02-17T19:14:24.258128" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>mysession</arg>
<arg>url=/api/logs?limit=100</arg>
<arg>headers=${headers}</arg>
<arg>expected_status=200</arg>
<doc>Sends a GET request on a previously created HTTP Session.</doc>
<status status="PASS" start="2026-02-17T19:14:24.165769" elapsed="0.092386"/>
</kw>
<kw name="Convert To String" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.259394" level="INFO">${body_string} = {'status': 'success', 'data': [{'id': 64, 'user_id': None, 'action': 'POST /api/auth/login', 'method': 'POST', 'endpoint': '/api/auth/login', 'ip_address': '::1', 'user_agent': 'python-requests/2.32.5...</msg>
<var>${body_string}</var>
<arg>${response.json()}</arg>
<doc>Converts the given item to a Unicode string.</doc>
<status status="PASS" start="2026-02-17T19:14:24.258407" elapsed="0.001017"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${body_string}</arg>
<arg>${test_action}</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2026-02-17T19:14:24.259624" elapsed="0.000434"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2026-02-17T19:14:24.260766" level="INFO">Success! เจอข้อมูลเก่า 90 วัน ยืนยันว่าระบบเก็บข้อมูลถูกต้อง</msg>
<arg>Success! เจอข้อมูลเก่า 90 วัน ยืนยันว่าระบบเก็บข้อมูลถูกต้อง</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2026-02-17T19:14:24.260511" elapsed="0.000308"/>
</kw>
<kw name="Execute Sql String" owner="DatabaseLibrary">
<msg time="2026-02-17T19:14:24.261228" level="INFO" html="true">Executing sql:&lt;br&gt;&lt;code style="font-weight: bold;"&gt;DELETE FROM "SystemLog" WHERE "action" = 'TEST_RETENTION_83263187';&lt;/code&gt;</msg>
<msg time="2026-02-17T19:14:24.262889" level="INFO">Commit the transaction</msg>
<arg>DELETE FROM "SystemLog" WHERE "action" = '${test_action}';</arg>
<doc>Executes the ``sql_string`` - as a single SQL command (default) or as separate statements.</doc>
<status status="PASS" start="2026-02-17T19:14:24.261032" elapsed="0.002358"/>
</kw>
<doc>จำลองการสร้างข้อมูลย้อนหลัง 90 วัน แล้วเช็คว่า API ยังส่งกลับมาไหม</doc>
<status status="PASS" start="2026-02-17T19:14:24.016616" elapsed="0.247069"/>
</test>
<kw name="Disconnect From Database" owner="DatabaseLibrary" type="TEARDOWN">
<doc>Disconnects from the database.</doc>
<status status="PASS" start="2026-02-17T19:14:24.264948" elapsed="0.000271"/>
</kw>
<status status="PASS" start="2026-02-17T19:14:23.683677" elapsed="0.581593"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat name="Retention Tests" id="s1" pass="1" fail="0" skip="0">Retention Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
